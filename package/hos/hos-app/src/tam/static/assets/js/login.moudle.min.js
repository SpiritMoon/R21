angular.module("login",["ui.bootstrap","ui.router","pascalprecht.translate","ngCookies","toastr"]).config(["toastrConfig",function(e){angular.extend(e,{allowHtml:!0,closeButton:!0,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",positionClass:"toast-top-right",preventOpenDuplicates:!1,tapToDismiss:!1,timeOut:6e3,titleClass:"toast-title",toastClass:"toast"})}]).config(["$httpProvider",function(e){e.interceptors.push(function(){return{responseError:function(e){return 403==e.status&&(window.location.href="/static/login.html"),e}}})}]).factory("authentifiedRequest",["$http",function(e){return{get:function(a,n,t,o){e({method:"get",url:a,params:n,timeout:15e3,headers:{Authorization:"sessionName "+window.localStorage.sessionId}}).success(t).error(o)},put:function(a,n,t,o,i){e({method:"put",url:a,params:n,data:t,timeout:15e3,headers:{"Content-Type":"application/json",Authorization:"sessionName "+window.localStorage.sessionId}}).success(o).error(i)},post:function(a,n,t,o,i){e({method:"post",url:a,params:n,data:t,timeout:15e3,headers:{"Content-Type":"application/json",Authorization:"sessionName "+window.localStorage.sessionId}}).success(o).error(i)},"delete":function(a,n,t,o){e({method:"delete",url:a,params:n,timeout:15e3,headers:{Authorization:"sessionName "+window.localStorage.sessionId}}).success(t).error(o)}}}]).factory("task",["$http","$q","authentifiedRequest","wizardService",function(e,a,n,t){function o(e,a,n,t,o,i,s,r){this.mac=e,this.ip=a,this.method=n,this.uri=t,this.params=o,this.data=i,this.defer=s,this.onCompletelistener=r}function i(e,n,t,i,s,r,l){var u=new o(e,n,t.toLowerCase(),i,s,r,a.defer(),l);return u}return o.prototype.clone=function(){return i(this.mac,this.ip,this.method,this.uri,this.params,this.data,this.onCompletelistener)},o.prototype.execute=function(e){e=e||1;var o=this,i=t.getProtocol()+"://",s=":"+t.getPort(),r=i+o.ip+s+o.uri,l=function(e,a){var n={mac:o.mac,ip:o.ip,success:!0,msg:"success"};null==e||""==e?(n.success=!1,n.msg="log_backendServer_error"):e.success||(n.success=!1,n.msg=e.msg),o.defer.resolve(n)},u=function(e,a){var n={mac:o.mac,ip:o.ip,success:!1,msg:"log_backendServer_error"};o.defer.reject(n)};switch(o.method){case"post":n.post(r,o.params,o.data,l,u);break;case"put":n.put(r,o.params,o.data,l,u);break;case"delete":n["delete"](r,o.params,l,u);break;default:return}return o.defer.promise.then(function(e){o.onCompletelistener(e)},function(n){return 3>e?(e++,o.clone().execute(e)):(o.onCompletelistener(n),void a.reject(n))})},{create:i}}]).factory("batchSyncConfig",["$q","$translate","lockScreen","task","toastr","authentifiedRequest",function(e,a,n,t,o,i){var s=function(e){var n=0,t=0,i=a.instant("log_apNumber_success")+":",s=a.instant("log_apNumber_fault")+":",r="";angular.forEach(e,function(e){e.success?n++:(t++,r=r+"<p>IP:"+e.ip+"&nbsp;"+a.instant("log_RSN")+":"+a.instant(e.msg)+"</p>")}),i="<p>"+i+n+"</p>",s="<p>"+s+t+"</p>"+r;var l=a.instant("log_operateResult")+":";o.info(i+s,l)},r=function(i,r,l,u,d,c){function m(e){C.msgs.push(e)}var C=this;C.msgs=[];var T=c,v=[];if(angular.forEach(T,function(e){if(3==e.state||2==e.state){var a=t.create(e.mac,e.ip,i,r,l,u,m);v.push(a.execute())}}),0==v.length){n.unlock();var p=a.instant("log_noRunningAp_fault");return o.error(p),void(null!=d&&d())}e.all(v).then(function(e){n.unlock(),s(C.msgs),null!=d&&d()})};return{request:function(e,t,s,l,u){n.lock(),i.get("/haps",null,function(i,d){if(203==d)return u("logout"),void n.unlock();if(null!=i&&i.success)r(e,t,s,l,u,i.result);else{var c=a.instant("log_getApList_fault");o.info(c),n.unlock()}},function(){var e=a.instant("log_getApList_fault");o.info(e),n.unlock()})}}}]).factory("lockScreen",["$timeout","$rootScope",function(e,a){var n=null,t=function(t){n&&e.cancel(n),n=e(function(){a.loading=!1},t)},o=function(){t(1e3)},i=function(e){a.loading=!0,t(null==e?15e3:e)};return{lock:i,unlock:o}}]).service("hanCrypto",[function(){var e=this;e.encoder=function(e){return null==e||""==e?e:BASE64.encoder(e)},e.decoder=function(e){if(null==e||""==e)return e;for(var a=BASE64.decoder(e),n="",t=0,o=a.length;o>t;++t)n+=String.fromCharCode(a[t]);return n}}]).factory("wizardService",[function(){var e={username:"",password:""},a={countryCode:"",timezone:"",city:""},n=!1,t="",o="",i="";return{getIP:function(){return i},setIP:function(e){i=e},getPort:function(){return t},setPort:function(e){t=e},getProtocol:function(){return o},setProtocol:function(e){o=e},getUserInfo:function(){return e},setUsername:function(a){e.username=a},setUserpassword:function(a){e.password=a},getCountry:function(){return a},setCountryCode:function(e){a.countryCode=e},setCountryFlag:function(e){n=e},getCountryFlag:function(){return n},setTimezone:function(e){a.timezone=e},setCity:function(e){a.city=e}}}]).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"/static/data/",suffix:".json"}),e.preferredLanguage("en_US"),e.useCookieStorage()}]).service("regularExpression",["$translate",function(e){var a=this;a.pattern={ldu4To16:"/^[\\w]{4,16}$/",ldu1To32:"/^[^`=]{1,32}$/",IP:"/^(([1-9])|([1-9]\\d)|(1\\d\\d)|(2[0-4]\\d)|(25[0-5]))(\\.(\\d|([1-9]\\d)|1\\d\\d|2[0-4]\\d|25[0-5])){3}$/",ldu8to63:"/^[^`=\"']{8,63}$/",Hex64char:"/^[a-fA-F\\d]{64}$/",exceptBlank1To32:"/^[\\x00-\\xff]{1,32}$/",AuthPort:"/^(^[1-9]\\d{0,3}$)|(^[1-5]\\d{4}$)|(^6[0-4][\\d]{3}$)|(^65[0-4][\\d]{2}$)|(^655[0-2][\\d]|6553[0-5]$)$/"},a.errorTip={passNotSame:e.instant("passNotSame"),validIP:e.instant("validIP"),Hexchar64:e.instant("Hexchar64"),wlanNameTip:e.instant("wlanNameTip"),adminPassTip:e.instant("loginPasswordCheck")},a.passNotSame=function(){return e.instant("passNotSame")},a.validIP=function(){return e.instant("validIP")},a.Hexchar64=function(){return e.instant("Hexchar64")},a.wlanNameTip=function(){return e.instant("wlanNameTip")},a.adminPassTip=function(){return e.instant("loginPasswordCheck")},a.valueNotNull=function(a){return e.instant("The")+a+e.instant("notEmpty")},a.lduLengthRangeTip=function(a,n){return e.instant("Please enter")+a+e.instant("To")+n+e.instant("notContain")},a.numRange=function(a,n,t){return e.instant("The")+a+e.instant("BETWEEN")+n+e.instant("AND")+t}}]).directive("repeat",[function(){return{restrict:"A",require:"ngModel",link:function(e,a,n,t){if(t){var o=a.inheritedData("$formController")[n.repeat],i=function(e){var a=e===o.$viewValue;return t.$setValidity("repeat",a),a?e:void 0};t.$parsers.push(i),t.$formatters.push(i),o.$parsers.push(function(e){return t.$setValidity("repeat",e===t.$viewValue),e})}}}}]),angular.module("login").constant("ntpTimeZoneConstant",{utc:["International-Date-Line-West@UTC+12","Coordinated-Universal-Time-11@UTC+11","Aleutian-Islands@UTC+10","Hawaii@UTC+10","Marquesas-Islands@UTC+09:30","Alaska@UTC+09","Coordinated-Universal-Time-09@UTC+09","Pacific-Time@UTC+08","Baja-California@UTC+08","Coordinated-Universal-Time-08@UTC+08","Chihuahua,La-Paz,Mazatlan@UTC+07","Mountain-Time@UTC+07","Arizona@UTC+07","Easter-Island@UTC+06","Guadalajara,Mexico-City,Monterrey@UTC+06","Saskatchewan@UTC+06","Central-Time@UTC+06","Central-America@UTC+06","Bogota,Lima,Quito,Rio-Branco@UTC+05","Eastern-Time@UTC+05","Havana@UTC+05","Haiti@UTC+05","Chetumal@UTC+05","Indiana(East)@UTC+05","Atlantic-Time@UTC+04","Caracas@UTC+04","Cuiaba@UTC+04","Georgetown,La-Paz,Manaus,San-Juan@UTC+04","Santiago@UTC+04","Turks-and-Caicos-Islands@UTC+04","Asuncion@UTC+04","Newfoundland@UTC+03:30","Araguaina@UTC+03","Brasilia@UTC+03","Buenos-Aires@UTC+03","Greenland@UTC+03","Cayenne,Fortaleza@UTC+03","Montevideo@UTC+03","Salvador@UTC+03","Saint-Pierre-and-Miquelon-Islands@UTC+03","Coordinated-Universal-Time-02@UTC+02","Cape-Verde-Is@UTC+01","Azores@UTC+01","Coordinated-Universal-Time@UTC-00","Dublin@UTC-00","Edinburgh,London@UTC-00","Lisbon@UTC-00","Casablanca@UTC-00","Monrovia,Reykjavik@UTC-00","Amsterdam,Berlin,Bern,Rome,Stockholm,Vienna@UTC-01","Belgrade,Bratislava,Budapest,Ljubljana,Prague@UTC-01","Brussels,Copenhagen,Madrid,Paris@UTC-01","Sarajevo,Skopje,Warsaw,Zagreb@UTC-01","Windhoek@UTC-01","West-Central-Africa@UTC-01","Amman@UTC-02","Beirut@UTC-02","Damascus@UTC-02","Tripoli@UTC-02","Harare,Pretoria@UTC-02","Helsinki,Kyiv,Riga,Sofia,Tallinn,Vilnius@UTC-02","Kishinev@UTC-02","Kaliningrad@UTC-02","Gaza,Hebron@UTC-02","Cairo@UTC-02","Athens,Bucharest@UTC-02","Jerusalem@UTC-02","Istanbul@UTC-02","Baghdad@UTC-03","Kuwait,Riyadh@UTC-03","Minsk@UTC-03","Moscow,Saint-Petersburg,Volgograd@UTC-03","Nairobi@UTC-03","Tehran@UTC-03:30","Abu-Dhabi,Muscat@UTC-04","Astrakhan,Ulyanovsk@UTC-04","Yerevan@UTC-04","Baku@UTC-04","Tbilisi@UTC-04","Port-Louis@UTC-04","Izevsk,Samarra@UTC-04","Kabul@UTC-04:30","Ashkhabad,Tashkent@UTC-05","Ekaterinburg@UTC-05","Islamabad,Karachi@UTC-05","Chennai,Kolkata,Mumbai,New-Delhi@UTC-05:30","Sri-Jayawardenepura@UTC-05:30","Kathmandu@UTC-05:45","Astana@UTC-06","Dhaka@UTC-06","Novosibirsk@UTC-06","Yangon@UTC-06:30","Barnaul,Gorno-altaysk@UTC-07","Hovd@UTC-07","Krasnoyarsk@UTC-07","Bangkok,Hanoi,Jakarta@UTC-07","Tomsk@UTC-07","Beijing,Chongqing,HongKong,Urumqi@UTC-08","Kuala-Lumpur,Singapore@UTC-08","Perth@UTC-08","Taipei@UTC-08","Ulaanbaatar@UTC-08","Irkutsk@UTC-08","Pyongyang@UTC-08:30","Eucla@UTC-08:45","Chita@UTC-09","Osaka,Sapporo,Tokyo@UTC-09","Seoul@UTC-09","Yakutsk@UTC-09","Adelaide@UTC-09:30","Darwin@UTC-09:30","Brisbane@UTC-10","Vladivostok@UTC-11","Guam,Port-Moresby@UTC-10","Hobart@UTC-10","Canberra,Melbourne,Sydney@UTC-10","Lord-Howe-Island@UTC-10:30","Bougainville-Island@UTC-11","Magadan@UTC-11","Norfolk-Island@UTC-11","Chokurdakh@UTC-11","Sakhalin@UTC-11","Solomon-Is,New-Caledonia@UTC-11","Anadyr,Petropavlovsk@UTC-12","Auckland,Wellington@UTC-12","Fiji@UTC-12","Coordinated-Universal-Time+12@UTC-12","Chatham-Islands@UTC-12:45","Nukualofa@UTC-13","Samoa@UTC-13","Christmas-Island@UTC-14"]}).constant("ntpDateTimeConstant",{edt:[{name:"International-Date-Line-West@UTC+12",value:"",dst:""},{name:"Coordinated-Universal-Time-11@UTC+11",value:"",dst:""},{name:"Aleutian-Islands@UTC+10",value:"",dst:""},{name:"Hawaii@UTC+10",value:"",dst:""},{name:"Marquesas-Islands@UTC+09:30",value:"",dst:""},{name:"Alaska@UTC+09",value:"AKDT,M3.2.0/2,M11.1.0/2",dst:"AKDT"},{name:"Coordinated-Universal-Time-09@UTC+09",value:"",dst:""},{name:"Pacific-Time@UTC+08",value:"PDT,M3.2.0/2,M11.1.0/2",dst:"PDT "},{name:"Baja-California@UTC+08",value:"MDT,M4.1.0/2,M10.5.0/2",dst:"MDT"},{name:"Coordinated-Universal-Time-08@UTC+08",value:"",dst:""},{name:"Chihuahua,La-Paz,Mazatlan@UTC+07",value:"MDT,M4.1.0/2,M10.5.0/2",dst:"MDT"},{name:"Mountain-Time@UTC+07",value:"MDT,M3.2.0/2,M11.1.0/2",dst:"MDT"},{name:"Arizona@UTC+07",value:"",dst:""},{name:"Easter-Island@UTC+06",value:"",dst:""},{name:"Guadalajara,Mexico-City,Monterrey@UTC+06",value:"CDT,M4.1.0/2,M10.5.0/2",dst:"CDT"},{name:"Saskatchewan@UTC+06",value:"",dst:""},{name:"Central-Time@UTC+06",value:"CDT,M3.2.0/2,M11.1.0/2",dst:"CDT"},{name:"Central-America@UTC+06",value:"",dst:""},{name:"Bogota,Lima,Quito,Rio-Branco@UTC+05",value:"",dst:""},{name:"Eastern-Time@UTC+05",value:"EDT,M3.2.0/2,M11.1.0/2",dst:"EDT"},{name:"Havana@UTC+05",value:"",dst:""},{name:"Haiti@UTC+05",value:"",dst:""},{name:"Chetumal@UTC+05",value:"",dst:""},{name:"Indiana(East)@UTC+05",value:"EDT,M3.2.0/2,M11.1.0/2",dst:"EDT"},{name:"Atlantic-Time@UTC+04",value:"ADT,M3.2.0/2,M11.1.0/2",dst:"ADT"},{name:"Caracas@UTC+04",value:"",dst:""},{name:"Cuiaba@UTC+04",value:"AMST,M10.3.0/0,M2.3.0/0",dst:"AMST"},{name:"Georgetown,La-Paz,Manaus,San-Juan@UTC+04",value:"",dst:""},{name:"Santiago@UTC+04",value:"SAND,M10.2.6/23:59:00,M3.2.6/23:59:00",dst:"SAND"},{name:"Turks-and-Caicos-Islands@UTC+04",value:"",dst:""},{name:"Asuncion@UTC+04",value:"PYST,M10.3.0/0,M3.2.0/0",dst:"PYST"},{name:"Newfoundland@UTC+03:30",value:"NDT,M3.2.0/00:01:00,M11.1.0/00:01:00",dst:"NDT"},{name:"Araguaina@UTC+03",value:"",dst:""},{name:"Brasilia@UTC+03",value:"BRAD,M11.1.0/0,M2.5.0/0",dst:"BRAD"},{name:"Buenos-Aires@UTC+03",value:"ARST,M10.3.0/0,M3.3.0/0",dst:"ARST"},{name:"Greenland@UTC+03",value:"GRED,M3.4.6/22,M10.4.6/23",dst:"GRED"},{name:"Cayenne,Fortaleza@UTC+03",value:"",dst:""},{name:"Montevideo@UTC+03",value:"UYST,M10.1.0/2,M3.2.0/2",dst:"UYST"},{name:"Salvador@UTC+03",value:"BRST,M10.3.0/0,M2.3.0/0",dst:"BRST"},{name:"Saint-Pierre-and-Miquelon-Islands@UTC+03",value:"",dst:""},{name:"Coordinated-Universal-Time-02@UTC+02",value:"",dst:""},{name:"Cape-Verde-Is@UTC+01",value:"",dst:""},{name:"Azores@UTC+01",value:"AZOST,M3.5.0/0,M10.3.0/0",dst:"AZOST"},{name:"Coordinated-Universal-Time@UTC-00",value:"",dst:""},{name:"Dublin@UTC-00",value:"IST,M3.5.0/2,M10.5.0/2",dst:"IST"},{name:"Edinburgh,London@UTC-00",value:"BST,M3.5.0/2,M10.5.0/2",dst:"BST"},{name:"Lisbon@UTC-00",value:"WEST,M3.5.0/2,M10.5.0/2",dst:"WEST"},{name:"Casablanca@UTC-00",value:"",dst:""},{name:"Monrovia,Reykjavik@UTC-00",value:"",dst:""},{name:"Amsterdam,Berlin,Bern,Rome,Stockholm,Vienna@UTC-01",value:"CEST,M3.5.0/0,M10.5.0/3",dst:"CEST"},{name:"Belgrade,Bratislava,Budapest,Ljubljana,Prague@UTC-01",value:"CEST,M3.5.0/0,M10.5.0/3",dst:"CEST"},{name:"Brussels,Copenhagen,Madrid,Paris@UTC-01",value:"CEST,M3.5.0/0,M10.5.0/3",dst:"CEST"},{name:"Sarajevo,Skopje,Warsaw,Zagreb@UTC-01",value:"CEST,M3.5.0/0,M10.5.0/3",dst:"CEST"},{name:"Windhoek@UTC-01",value:"WAST,M9.1.0/0,M4.1.0/3",dst:"WAST"},{name:"West-Central-Africa@UTC-01",value:"",dst:""},{name:"Amman@UTC-02",value:"EEST,M3.5.4/0,M10.5.5/1",dst:"EEST"},{name:"Beirut@UTC-02",value:"EEST,M3.5.0/0,M10.5.0/0",dst:"EEST"},{name:"Damascus@UTC-02",value:"EEST,M3.5.0/0,M10.5.0/0",dst:"EEST"},{name:"Tripoli@UTC-02",value:"",dst:""},{name:"Harare,Pretoria@UTC-02",value:"",dst:""},{name:"Helsinki,Kyiv,Riga,Sofia,Tallinn,Vilnius@UTC-02",value:"EEST,M3.5.0/3,M10.5.0/4",dst:"EEST"},{name:"Kishinev@UTC-02",value:"",dst:""},{name:"Kaliningrad@UTC-02",value:"",dst:""},{name:"Gaza,Hebron@UTC-02",value:"",dst:""},{name:"Cairo@UTC-02",value:"",dst:""},{name:"Athens,Bucharest@UTC-02",value:"EEST,M3.5.0/0,M10.5.0/4",dst:"EEST"},{name:"Jerusalem@UTC-02",value:"IST,M3.5.5/2,M9.4.0/2",dst:"IST"},{name:"Istanbul@UTC-02",value:"EEST,M3.5.0/3,M10.5.0/4",dst:"EEST"},{name:"Baghdad@UTC-03",value:"",dst:""},{name:"Kuwait,Riyadh@UTC-03",value:"",dst:""},{name:"Minsk@UTC-03",value:"",dst:""},{name:"Moscow,Saint-Petersburg,Volgograd@UTC-03",value:"",dst:""},{name:"Nairobi@UTC-03",value:"",dst:""},{name:"Tehran@UTC-03:30",value:"",dst:""},{name:"Abu-Dhabi,Muscat@UTC-04",value:"",dst:""},{name:"Astrakhan,Ulyanovsk@UTC-04",value:"",dst:""},{name:"Yerevan@UTC-04",value:"",dst:""},{name:"Baku@UTC-04",value:"AZST,M3.5.0/4,M10.5.0/5",dst:"AZST"},{name:"Tbilisi@UTC-04",value:"",dst:""},{name:"Port-Louis@UTC-04",value:"",dst:""},{name:"Izevsk,Samarra@UTC-04",value:"",dst:""},{name:"Kabul@UTC-04:30",value:"",dst:""},{name:"Ashkhabad,Tashkent@UTC-05",value:"",dst:""},{name:"Ekaterinburg@UTC-05",value:"",dst:""},{name:"Islamabad,Karachi@UTC-05",value:"",dst:""},{name:"Chennai,Kolkata,Mumbai,New-Delhi@UTC-05:30",value:"",dst:""},{name:"Sri-Jayawardenepura@UTC-05:30",value:"",dst:""},{name:"Kathmandu@UTC-05:45",value:"",dst:""},{name:"Astana@UTC-06",value:"",dst:""},{name:"Dhaka@UTC-06",value:"",dst:""},{name:"Novosibirsk@UTC-06",value:"",dst:""},{name:"Yangon@UTC-06:30",value:"",dst:""},{name:"Barnaul,Gorno-altaysk@UTC-07",value:"",dst:""},{name:"Hovd@UTC-07",value:"",dst:""},{name:"Krasnoyarsk@UTC-07",value:"",dst:""},{name:"Bangkok,Hanoi,Jakarta@UTC-07",value:"",dst:""},{name:"Tomsk@UTC-07",value:""},{name:"Beijing,Chongqing,HongKong,Urumqi@UTC-08",value:"",dst:""},{name:"Kuala-Lumpur,Singapore@UTC-08",value:"",dst:""},{name:"Perth@UTC-08",value:"",dst:""},{name:"Taipei@UTC-08",value:"",dst:""},{name:"Ulaanbaatar@UTC-08",value:"",dst:""},{name:"Irkutsk@UTC-08",value:"",dst:""},{name:"Pyongyang@UTC-08:30",value:"",dst:""},{name:"Eucla@UTC-08:45",value:"",dst:""},{name:"Chita@UTC-09",value:"",dst:""},{name:"Osaka,Sapporo,Tokyo@UTC-09",value:"",dst:""},{name:"Seoul@UTC-09",value:"",dst:""},{name:"Yakutsk@UTC-09",value:"",dst:""},{name:"Adelaide@UTC-09:30",value:"CST,M10.1.0/2,M4.1.0/3",dst:"CST"},{name:"Darwin@UTC-09:30",value:"",dst:""},{name:"Brisbane@UTC-10",value:"",dst:""},{name:"Vladivostok@UTC-11",value:"",dst:""},{name:"Guam,Port-Moresby@UTC-10",value:"",dst:""},{name:"Hobart@UTC-10",value:"EST,M10.1.0/2,M4.1.0/3",dst:"EST"},{name:"Canberra,Melbourne,Sydney@UTC-10",value:"EST,M10.1.0/2,M4.1.0/3",dst:"EST"},{name:"Lord-Howe-Island@UTC-10:30",value:"",dst:""},{name:"Bougainville-Island@UTC-11",value:"",dst:""},{name:"Magadan@UTC-11",value:"",dst:""},{name:"Norfolk-Island@UTC-11",value:"",dst:""},{name:"Chokurdakh@UTC-11",value:"",dst:""},{name:"Sakhalin@UTC-11",value:"",dst:""},{name:"Solomon-Is,New-Caledonia@UTC-11",value:"",dst:""},{name:"Anadyr,Petropavlovsk@UTC-12",value:"",dst:""},{name:"Auckland,Wellington@UTC-12",value:"NZDT,M9.5.0/2,M4.1.0/3",dst:"NZDT"},{name:"Fiji@UTC-12",value:"FJST,M10.3.0/2,M1.4.0/3",dst:"FJST"},{name:"Coordinated-Universal-Time+12@UTC-12",value:"",dst:""},{name:"Chatham-Islands@UTC-12:45",value:"",dst:""},{name:"Nukualofa@UTC-13",value:"",dst:""},{name:"Samoa@UTC-13",value:"WST,M9.5.0/3,M4.1.0/4",dst:"WST"},{name:"Christmas-Island@UTC-14",value:"",dst:""}]}),angular.module("login").controller("login-logoutPromptCtrl",["$scope","$timeout","$modalInstance","$translate",function(e,a,n,t){e.timeout;var o,i=5;e.flag=2,e.initFunction=function(){o=setInterval(e.changeLogout_5s_text,1e3),e.timeout=a(function(){e.logout()},1e3*i)},e.changeLogout_5s_text=function(){var e=$("#logout-5s");0!=i&&(i-=1);var a=t.instant("loginAccountAgain")+i+t.instant("loginSeconds");e.text(a)},e.logout=function(){a.cancel(e.timeout),clearInterval(o),window.location.href="/static/login.html"},e.initFunction()}]),angular.module("login").run(["$rootScope","$location","wizardService",function(e,a,n){e.loading=!1,n.setPort(a.port()),n.setIP(a.host()),n.setProtocol(a.protocol())}]).controller("loginCtrl",["$translate","$http","$scope","$interval","$modal","toastr","wizardService","$cookieStore","$timeout",function(e,a,n,t,o,i,s,r,l){function u(){null==r.get("lang")||"en"==r.get("lang")?(n.isEnglish=!0,n.isChiness=!1,n.isBoth=!1,n.isDeutsch=!1):"zh"==r.get("lang")?(n.isEnglish=!1,n.isChiness=!0,n.isBoth=!1,n.isDeutsch=!1):"de"==r.get("lang")&&(n.isEnglish=!1,n.isChiness=!1,n.isBoth=!1,n.isDeutsch=!0)}function d(){n.selectedRole=n.rolesddd[0]}n.isEnglish=!0,n.isChiness=!1,n.isDeutsch=!1,n.isBoth=!1,window.localStorage.countryCode="",u(),n.langInterval={},n.setLang=function(a){var o="en_US";switch(a){case 0:o="en_US",r.put("lang","en"),n.isEnglish=!1,n.isChiness=!1,n.isBoth=!0,n.isDeutsch=!1,n.langInterval=t(function(){n.isBoth=!1,n.isEnglish=!0,n.isChiness=!1,n.isDeutsch=!1},3e3,1);break;case 1:o="zh_CH",r.put("lang","zh"),n.isEnglish=!1,n.isChiness=!1,n.isBoth=!0,n.langInterval=t(function(){n.isBoth=!1,n.isEnglish=!1,n.isChiness=!0,n.isDeutsch=!1},3e3,1);break;case 2:o="de_DE",r.put("lang","de"),n.isEnglish=!1,n.isChiness=!1,n.isBoth=!0,n.isDeutsch=!1,n.langInterval=t(function(){n.isBoth=!1,n.isEnglish=!1,n.isChiness=!1,n.isDeutsch=!0},3e3,1);break;case 3:t.cancel(n.langInterval),o="en_US",r.put("lang","en"),n.isEnglish=!0,n.isChiness=!1,n.isBoth=!1,n.isDeutsch=!1;break;case 4:t.cancel(n.langInterval),o="zh_CH",r.put("lang","zh"),n.isEnglish=!1,n.isChiness=!0,n.isBoth=!1,n.isDeutsch=!1;break;case 5:t.cancel(n.langInterval),o="de_DE",r.put("lang","de"),n.isEnglish=!1,n.isChiness=!1,n.isBoth=!1,n.isDeutsch=!0}e.use(o)},n.rolesddd=[{id:1,name:"Administrator"},{id:2,name:"Viewer"},{id:3,name:"GuestOperator"}],window.localStorage.sessionId="no session",d(),n.loginParam={username:"",password:"","button_clicked ":!1},n.myKeyup=function(e){var a=window.event?e.keyCode:e.which;13==a&&n.showUserGuide()},n.time_out_func=function(e){return null==e?void(n.loginParam.button_clicked=!1):void l(function(){n.loginParam.button_clicked=!1},e)},n.showUserGuide=function(){if(n.loginParam.username=this.selectedRole.name,""==n.loginParam.username|""==n.loginParam.password){var t=e.instant("login_log_password_notnull");return i.clear(),void i.info(t)}var o={username:"",password:""};o.username=this.selectedRole.name,o.password=hex_md5(n.loginParam.password).toLowerCase(),n.loginParam.button_clicked=!0,a({method:"post",url:"/authentication/login",data:o,timeout:15e3,headers:{"Content-Type":"application/json"}}).success(function(a){if(null==a||""==a){var t=e.instant("log_backendServer_error");return i.clear(),void i.info(t)}if(!a.success){var t=e.instant(a.msg);return i.clear(),i.info(t),void n.time_out_func(3e3)}var o=a.result.syncmsgs;null!=o&&0!=o.length?n.showSyncmsgs(o,a):n.delayedJumb(a)}).error(function(a){var t=e.instant("log_backendServer_error");i.clear(),i.info(t),n.time_out_func(3e3)})},n.showSyncmsgs=function(a,t){var o=e.instant("log_apNumber_success")+":",s=0,r=0,u="<p>"+e.instant("login_log_ap_fault")+":</p>";angular.forEach(a,function(e,a){null!=e&&"null"!=e&&e.success?s++:(r++,u=u+"<p>IP:"+a+"</p>")}),o="<p>"+o+s+"</p>";var d=e.instant("login_log_session_synch_results"),c=o;r>0&&(c=o+u+"<p>"+e.instant("login_log_session_synch_error_msg")+"</p>"),i.info(c,d),l(function(){n.delayedJumb(t)},3e3)},n.delayedJumb=function(a){if(console.warn(a),n.time_out_func(),window.localStorage.sessionId=a.result.sessionId,1!=a.result.flag)2==a.result.flag?(i.info(e.instant("login_oxo_title")),l(function(){n.loginInMain()},5e3)):n.loginInMain();else{window.localStorage.countryCode=a.result.countryFlag,"RW"==a.result.countryFlag&&s.setCountryFlag(!0),s.setUsername(n.loginParam.username);o.open({templateUrl:"guide-welcome.html",controller:"welcomeCtrl",size:"md",backdrop:"static",keyboard:!1})}},n.loginInMain=function(){window.localStorage.username=n.loginParam.username,window.location.href="main.html",window.localStorage.isFromLogin=1},n.currentProtocol=s.getProtocol(),console.info("the current protocol = "+n.currentProtocol),n.goToHttpsGuide=function(){o.open({templateUrl:"guide-https.html",controller:"httpsCtrl",size:"md",backdrop:"static",keyboard:!1})}}]),angular.module("login").controller("welcomeCtrl",["$rootScope","$scope","$modalInstance","$modal",function(e,a,n,t){a.welcomeNext=function(){n.dismiss("cancel"),e.modal_instance=t.open({templateUrl:"guide-first-step.html",controller:"firstStepCtrl",size:"md",backdrop:"static",keyboard:!1})}}]),angular.module("login").controller("threeStepCtrl",["$scope","$modal","$modalInstance","toastr","wizardService","batchSyncConfig","regularExpression","hanCrypto","$translate",function(e,a,n,t,o,i,s,r,l){e.three="",o.getCountryFlag()?e.three="3/3":e.three="2/2",e.regularExpression=s,e.redisSwitch={isSwitch:!1},e.isRedisShow=!1,e.redisChange=function(a){a?e.isRedisShow=!0:e.isRedisShow=!1},e.band={TwoG:!0,FiveG:!0},e.isTwoG=!0,e.countryCode=o.getCountryFlag(),"CS"==e.countryCode&&(e.band={TwoG:!1,FiveG:!0},e.isTwoG=!1),e.wizardInfo={ssid:"",securityType:"",key:"",keyConfirm:"",band:"",authServer:"",authPort:"",authSecret:"",acctServer:"",acctPort:"",acctSecret:"",username:"",password:"",countryCode:"",captivePortal:"No",timezone:"",city:"",fast:"false",okc:"false"},e.passphraseFormatArray=[{id:"1",name:"8-63 chars"},{id:"2",name:"64 Hexadecimal chars"}],e.formatSelected=e.passphraseFormatArray[0],e.isPersonal=!0,e.isEnterprise=!1,e.securityTypeArray=[{id:"00",name:"Open",units:[]},{id:"01",name:"Personal",units:[{id:"0109",name:"Both(wpa &wpa2)",value:"psk-mixed+tkip+aes"},{id:"0107",name:"wpa2-personal",value:"psk2+aes"}]},{id:"02",name:"Enterprise",units:[{id:"0209",name:"Both(wpa &wpa2)",value:"wpa-mixed+tkip+aes"},{id:"0207",name:"wpa2-enterprise",value:"wpa2+aes"}]}],e.selectedSecurity=e.securityTypeArray[1],e.selectedEncryption=e.selectedSecurity.units[0],e.formatSelected=e.passphraseFormatArray[0],e.disabledSecurity=!1,e.disabledEncryption=!1,e.changeSecurityType=function(){"00"==this.selectedSecurity.id?(e.isPersonal=!1,e.isEnterprise=!1):"01"==this.selectedSecurity.id?(e.isPersonal=!0,e.isEnterprise=!1,this.selectedEncryption=this.selectedSecurity.units[0]):"02"==this.selectedSecurity.id&&(e.isPersonal=!1,e.isEnterprise=!0,e.isRedisShow=!1,e.redisSwitch.isSwitch=!1,this.selectedEncryption=this.selectedSecurity.units[0])},e.save=function(){if(e.wizardInfo.countryCode=o.getCountry().countryCode,e.wizardInfo.securityType=this.selectedSecurity.name,void 0==typeof this.selectedEncryption||(e.wizardInfo.encryption=this.selectedEncryption.value),e.band.TwoG&&e.band.FiveG)e.wizardInfo.band="2G,5G";else if(e.band.TwoG)e.wizardInfo.band="2G";else{if(!e.band.FiveG)return void t.info("please selected band !","");e.wizardInfo.band="5G"}e.wizardInfo.username=o.getUserInfo().username,e.wizardInfo.password=o.getUserInfo().password,e.wizardInfo.timezone=o.getCountry().timezone,e.wizardInfo.city=o.getCountry().city,e.redisSwitch.isSwitch||(e.wizardInfo.acctServer="",e.wizardInfo.acctPort="",e.wizardInfo.acctSecret="");var s=angular.copy(e.wizardInfo);s.key=r.encoder(s.key),s.keyConfirm=r.encoder(s.keyConfirm),s.authSecret=r.encoder(s.authSecret),s.acctSecret=r.encoder(s.acctSecret),i.request("post","/other/wizard",null,s,function(t){if(n.dismiss("cancel"),"logout"==t)a.open({templateUrl:"logout-prompt.html",controller:"login-logoutPromptCtrl",size:"md",backdrop:"static",keyboard:!1});else{a.open({templateUrl:"guide-complete.html",controller:"completeCtrl",size:"md",backdrop:"static",resolve:{wlanName:function(){return e.wizardInfo.ssid}}})}})},e.codeDetailStart=!1,e.codeDetailEnd="",e.isDetailFormat=!1,e.isDetailTrue=!0,e.changeDetailSSID=function(a){if(null!=a&&""!=a){var n=a.substring(0,1);"*"==n||"."==n||"\\"==n?(e.codeDetailStart=!0,e.codeDetailEnd=l.instant("canNotBegin"),e.isDetailFormat=!0,e.isDetailTrue=!0):(e.codeDetailStart=!1,e.isDetailFormat=!1,e.isDetailTrue=!1);var t=a.substring(a.length-1,a.length);e.codeDetailStart||"\\"!=t||(e.codeDetailEnd=l.instant("canNotEnd"),e.isDetailFormat=!0,e.isDetailTrue=!0);var o=/\s+/,i=o.test(a);i&&(e.codeDetailStart=!0,e.codeDetailEnd=l.instant("canNotBlanks"),e.isDetailFormat=!0,e.isDetailTrue=!0)}else e.isDetailFormat=!1,e.isDetailTrue=!0},e.selecFormat=function(){e.formatSelected=this.formatSelected}}]).directive("integerport",[function(){return{restrict:"A",link:function(e,a,n){a.bind("paste",function(e){var a=e||window.event;a.charCode?a.preventDefault():a.returnValue=!1}),a.bind("keydown",function(e){var a=e||window.event;13==a.keyCode?a.keyCode=9:13==a.charCode&&(a.charCode=9)}),a.bind("keypress",function(e){var a=e||window.event;a.charCode&&(a.charCode<48||a.charCode>57)&&a.preventDefault(),(a.keyCode<48||a.keyCode>57)&&(a.returnValue=!1)})}}}]),angular.module("login").controller("secondStepCtrl",["$scope","$modal","$modalInstance","toastr","wizardService","ntpTimeZoneConstant","ntpDateTimeConstant",function(e,a,n,t,o,i,s){e.second="",o.getCountryFlag()&&(e.second="2/3"),e.countryCodeArray=[{name:"Algeria",value:"DZ"},{name:"Argentina",value:"AR"},{name:"Australia",value:"AU"},{name:"Austria",value:"AT"},{name:"Bahrain",value:"BH"},{name:"Belgium",value:"BE"},{name:"Bermuda",value:"BM"},{name:"Bolivia",value:"BO"},{name:"Brazil",value:"BR"},{name:"Canada",value:"CA"},{name:"Chile",value:"CL"},{name:"China",value:"CN"},{name:"Colombia",value:"CO"},{name:"Croatia ",value:"HR"},{name:"Czech Republic",value:"CZ"},{name:"Denmark",value:"DK"},{name:"Dominican Republic",value:"DO"},{name:"El Salvador",value:"SV"},{name:"Egypt",value:"EG"},{name:"Estonia",value:"EE"},{name:"Finland",value:"FI"},{name:"France",value:"FR"},{name:"Germany",value:"DE"},{name:"Greece",value:"GR"},{name:"Guam",value:"GU"},{name:"Guatemala",value:"GT"},{name:"Hong Kong",value:"HK"},{name:"Hungary",value:"HU"},{name:"Iceland",value:"IS"},{name:"India",value:"IN"},{name:"Indonesia",value:"ID"},{name:"Ireland",value:"IE"},{name:"Islamic Republic of Pakistan",value:"PK"},{name:"Italy",value:"IT"},{name:"Jamaica",value:"JM"},{name:"Jordan",value:"JO"},{name:"Kuwait",value:"KW"},{name:"Latvia",value:"LV"},{name:"Lebanon",value:"LB"},{name:"Liechtenstein",value:"LI"},{name:"Lithuania",value:"LT"},{name:"Luxembourg",value:"LU"},{name:"Macedonia",value:"MK"},{name:"Malaysia",value:"MY"},{name:"Malta",value:"MT"},{name:"Mauritius",value:"MU"},{name:"Mexico",value:"MX"},{name:"Monaco",value:"MC"},{name:"Morocco",value:"MA"},{name:"Netherlands",value:"NL"},{name:"New Zealand",value:"NZ"},{name:"Nigeria",value:"NG"},{name:"Norway",value:"NO"},{name:"Oman",value:"OM"},{name:"Panama",value:"PA"},{name:"Peru",value:"PE"},{name:"Philippines",value:"PH"},{name:"Poland",value:"PL"},{name:"Portugal",value:"PT"},{name:"Puerto Rico",value:"PR"},{name:"Qatar",value:"QA"},{name:"Republic of Korea",value:"KR"},{name:"Romania",value:"RO"},{name:"Russia",value:"RU"},{name:"Saudi Arabia",value:"SA"},{name:"Singapore",value:"SG"},{name:"Slovak Republic",value:"SK"},{name:"South Africa",value:"ZA"},{name:"Spain",value:"ES"},{name:"Sri Lanka",value:"LK"},{name:"Sweden",value:"SE"},{name:"Switzerland",value:"CH"},{name:"Taiwan",value:"TW"},{name:"Thailand",value:"TH"},{name:"Tunisia",value:"TN"},{name:"Turkey",value:"TR"},{name:"United Arab Emirates",value:"AE"},{name:"United Kingdom",value:"GB"},{name:"Venezuela",value:"VE"},{name:"Vietnam",value:"VN"}],e.countryCode=e.countryCodeArray[0],e.timeZoneArray=i.utc,e.selectTimeZone=e.timeZoneArray[0],e.firstStepOk=function(){e.countryCode=this.countryCode,o.setCountryCode(e.countryCode.value);for(var t=this.selectTimeZone,i=t.split("@"),r=i[0],l=i[1],u=s.edt,d=0;d<u.length;d++)t==u[d].name&&(l+=u[d].value);o.setTimezone(l),o.setCity(r),n.dismiss("cancel");a.open({templateUrl:"guide-three-step.html",controller:"threeStepCtrl",size:"md",backdrop:"static",keyboard:!1})}}]),angular.module("login").controller("httpsCtrl",["$translate","$scope","$modal","$modalInstance","toastr","wizardService","regularExpression","lockScreen","$http","$location",function(e,a,n,t,o,i,s,r,l,u){function d(e,a,n){var t="application/octet-stream",o=!1;a=a();var i=a["content-type"]||t;try{var s=new Blob([e],{type:i});if(navigator.msSaveBlob)navigator.msSaveBlob(s,n);else{var r=navigator.webkitSaveBlob||navigator.mozSaveBlob||navigator.saveBlob;if(void 0===r)throw"Not supported";r(s,n),o=!0}}catch(l){}if(!o){var u=window.URL||window.webkitURL||window.mozURL||window.msURL;if(u){var d=document.createElement("a");if("download"in d)try{var s=new Blob([e],{type:i}),c=u.createObjectURL(s);d.setAttribute("href",c),d.setAttribute("download",n);var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(m),o=!0}catch(l){}if(!o)try{var s=new Blob([e],{type:t}),c=u.createObjectURL(s);window.location=c,o=!0}catch(l){}}}o||window.open(httpPath,"_blank","")}a.downloadCertificate=function(){var a=i.getProtocol()+"://"+i.getIP()+":"+i.getPort()+"/downloadCertificate",n="CAhan.crt",t="ALE OmniAccess.CRT";l({method:"put",url:a,params:{name:n},headers:{Authorization:"sessionName "+window.localStorage.sessionId}}).success(function(a,n,i){r.unlock(),null==a||""==a||("undefined"==typeof a.success?(d(a,i,t),o.info(e.instant("downloadCertificateSuccess"),"")):o.info(e.instant(a.msg),""))}).error(function(){r.unlock(),o.warning(e.instant("log_backendServer_error"),"")})},a.goToHttpsLogin=function(){window.location.href="https://"+i.getIP()+"/static/login.html"}}]),angular.module("login").controller("firstStepCtrl",["$translate","$scope","$modal","$modalInstance","toastr","wizardService","regularExpression",function(e,a,n,t,o,i,s){a.updFlag=!0,a.updateParam={password:"",confirm:""},a.regularExpression=s,a.first="",i.getCountryFlag()?a.first="1/3":a.first="1/2",a.firstStepOk=function(){if(""==a.updateParam.password||""==a.updateParam.confirm){var s=e.instant("login_log_password_notnull");return void o.info(s)}if("admin"==a.updateParam.password)return void o.info(e.instant("log_update_password"));if(i.setUserpassword(hex_md5(a.updateParam.password).toLowerCase()),
t.dismiss("cancel"),i.getCountryFlag()){n.open({templateUrl:"guide-second-step.html",controller:"secondStepCtrl",size:"md",backdrop:"static",keyboard:!1})}else{n.open({templateUrl:"guide-three-step.html",controller:"threeStepCtrl",size:"md",backdrop:"static",keyboard:!1})}}}]),angular.module("login").controller("completeCtrl",["$rootScope","$scope","wlanName",function(e,a,n){a.wlanName=n,a.complete=function(){window.location.href="login.html"}}]);